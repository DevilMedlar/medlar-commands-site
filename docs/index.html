
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <title>MedlarTV Commands</title>
      <style>
        :root { --bg:#0f1218; --card:#1a1f2b; --text:#e6e9ef; --muted:#9aa4b2; --accent:#6ae3ff; }
        body { margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:var(--bg); color:var(--text); }
        header { padding:20px 24px; border-bottom:1px solid #222633; display:flex; align-items:center; gap:12px; }
        header h1 { margin:0; font-size:18px; letter-spacing:.4px; }
        .container { max-width:960px; margin:24px auto; padding:0 16px; }
        .controls { display:flex; gap:12px; margin-bottom:16px; }
        input, select { background:var(--card); border:1px solid #2b3242; color:var(--text); padding:10px 12px; border-radius:8px; outline:none; }
        .grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(280px,1fr)); gap:14px; }
        .card { background:var(--card); border:1px solid #2b3242; border-radius:10px; padding:14px; }
        .name { font-weight:600; font-size:15px; }
        .roles { margin-top:6px; color:var(--muted); font-size:12px; }
        .desc { margin-top:8px; font-size:13px; color:var(--text); }
        .usage { margin-top:6px; font-size:12px; color:var(--muted); }
        .response { margin-top:10px; font-size:12px; color:#c8d2e0; border-top:1px dashed #2b3242; padding-top:8px; }
        .badge { display:inline-block; padding:3px 8px; border-radius:999px; background:#253047; color:#bfe8ff; margin-right:6px; font-size:11px; }
        .empty { color:var(--muted); text-align:center; padding:24px; }
        a { color:var(--accent); text-decoration:none; }
      </style>
    </head>
    <body>
      <header>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7l10 5 10-5-10-5zm0 7l-10 5 10 5 10-5-10-5z" fill="#6ae3ff"/></svg>
        <h1>MedlarTV Command Catalog</h1>
      </header>
      <div class="container">
        <div class="controls">
          <input id="q" type="text" placeholder="Search commandsâ€¦" />
          <select id="role">
            <option value="">All roles</option>
            <option>everybody</option>
            <option>pilot</option>
            <option>copilot</option>
            <option>mod</option>
            <option>vip</option>
          </select>
        </div>
        <div id="grid" class="grid"></div>
        <div id="empty" class="empty" style="display:none">No commands match your filters.</div>
        <p style="margin-top:18px; font-size:12px; color:#8fa1b5">Source: <a href="commands.json">commands.json</a></p>
      </div>
      <script>
        const state = { commands: [], q: '', role: '' };
        const grid = document.getElementById('grid');
        const empty = document.getElementById('empty');
        const q = document.getElementById('q');
        const role = document.getElementById('role');

        q.addEventListener('input', () => { state.q = q.value.toLowerCase(); render(); });
        role.addEventListener('change', () => { state.role = role.value; render(); });

        function matches(cmd) {
          const name = cmd.name.toLowerCase();
          const desc = (cmd.description||'').toLowerCase();
          const usage = (cmd.usage||'').toLowerCase();
          const text = name + ' ' + desc + ' ' + usage;
          const roleOk = !state.role || (cmd.allowed_roles||[]).includes(state.role);
          const queryOk = !state.q || text.includes(state.q);
          return roleOk && queryOk;
        }

        function render() {
          const list = state.commands.filter(matches);
          grid.innerHTML = '';
          if (!list.length) { empty.style.display = 'block'; return; } else { empty.style.display = 'none'; }
          for (const c of list) {
            const roles = (c.allowed_roles||[]).map(r => `<span class="badge">${r}</span>`).join(' ');
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
              <div class="name">!${c.name}</div>
              <div class="roles">${roles || '<span class="badge">everybody</span>'}</div>
              ${c.description ? `<div class="desc">${c.description}</div>` : ''}
              ${c.usage ? `<div class="usage"><strong>Usage:</strong> ${c.usage}</div>` : ''}
              ${c.response ? `<div class="response"><strong>Response:</strong> ${c.response}</div>` : ''}
            `;
            grid.appendChild(card);
          }
        }

        async function refetch() {
          try {
            const r = await fetch('commands.json', {cache:'no-store'});
            const j = await r.json();
            const next = j.commands || [];
            const prev = state.commands;
            const changed = prev.length !== next.length ||
              prev.some((c, i) => !next[i] || next[i].name !== c.name || JSON.stringify(next[i]) !== JSON.stringify(c));
            if (changed) { state.commands = next; render(); }
          } catch (e) {}
        }

        refetch();
        setInterval(refetch, 5000);
      </script>
    </body>
    </html>
    